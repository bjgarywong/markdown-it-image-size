!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).markdownItImageSize={})}(this,function(e){var r;function i(e){return e>=r.NUMBER_ZERO&&e<=r.NUMBER_NINE}function t(e,t,n){var o=function(e,t,n){for(var o=e;o<t;o+=1){var a=n.charCodeAt(o);if(!i(a)&&a!==r.PERCENTAGE)return o}return t}(t,n,e);return{position:o,value:e.slice(t,o)}}!function(e){e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.OPENING_BRACKET=91]="OPENING_BRACKET",e[e.OPENING_PARENTHESIS=40]="OPENING_PARENTHESIS",e[e.WHITESPACE=32]="WHITESPACE",e[e.NEW_LINE=10]="NEW_LINE",e[e.EQUALS=61]="EQUALS",e[e.LOWER_CASE_X=120]="LOWER_CASE_X",e[e.NUMBER_ZERO=48]="NUMBER_ZERO",e[e.NUMBER_NINE=57]="NUMBER_NINE",e[e.PERCENTAGE=37]="PERCENTAGE"}(r||(r={}));var n=function(e,i){for(var t=e;t<i.posMax;){var n=i.src.charCodeAt(t);if(n!==r.WHITESPACE&&n!==r.NEW_LINE)break;t+=1}return t},o=function(e,i){var o,a,s,E="",f="",c="",p=e.pos,N=e.posMax;if(!function(e){return e.src.charCodeAt(e.pos)===r.EXCLAMATION_MARK&&e.src.charCodeAt(e.pos+1)===r.OPENING_BRACKET}(e))return!1;var h=e.pos+2,u=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(u<0)return!1;if((o=u+1)<N&&e.src.charCodeAt(o)===r.OPENING_PARENTHESIS){if((o=n(o+=1,e))>=N)return!1;var d=function(e,r){var i=e.md.helpers.parseLinkDestination(e.src,r,e.posMax);if(i.ok){var t=e.md.normalizeLink(i.str);return e.md.validateLink(t)?{position:i.pos,href:t}:{position:r,href:""}}}(e,o);if(!d)return!1;E=d.href,s=o=d.position,o=n(o,e);var A=e.md.helpers.parseLinkTitle(e.src,o,e.posMax);o<N&&s!==o&&A.ok?(a=A.str,o=n(o=A.pos,e)):a="";var l=function(e,i){if(!(e-1<0)&&i.src.charCodeAt(e-1)===r.WHITESPACE){var o=function(e,i,n){if(!(i>=n)){var o=i;if(e.charCodeAt(o)===r.EQUALS&&((E=e.charCodeAt(o+=1))===r.LOWER_CASE_X||E>=r.NUMBER_ZERO&&E<=r.NUMBER_NINE)){var a=t(e,o,n);if(e.charCodeAt(o=a.position)===r.LOWER_CASE_X){var s=t(e,o+=1,n);return{width:a.value,height:s.value,position:o=s.position}}}}var E}(i.src,e,i.posMax);if(o)return{position:n(o.position,i),width:o.width,height:o.height}}}(o,e);if(l&&(o=l.position,f=l.width,c=l.height),o>=N||41!==e.src.charCodeAt(o))return e.pos=p,!1;o+=1}else{if(void 0===e.env.references)return!1;var v;(o=n(o,e))<N&&91===e.src.charCodeAt(o)?(s=o+1,(o=e.md.helpers.parseLinkLabel(e,o))>=0?v=e.src.slice(s,o+=1):o=u+1):o=u+1,v||(v=e.src.slice(h,u));var R=e.env.references[e.md.utils.normalizeReference(v)];if(!R)return e.pos=p,!1;E=R.href,a=R.title}return i||(""==f&&""==c&&(f="100%"),function(e,r,i,t,n,o,a){e.pos=r,e.posMax=i;var s=e.push("image","img",0);s.children=[];var E=new e.md.inline.State(e.src.slice(r,i),e.md,e.env,s.children);E.md.inline.tokenize(E),s.attrSet("src",t),s.attrSet("alt",""),n&&s.attrSet("title",n),""!==o&&s.attrSet("width",o),""!==a&&s.attrSet("height",a)}(e,h,u,E,a,f,c)),e.pos=o,e.posMax=N,!0};e.imageSize=function(e){e.inline.ruler.before("emphasis","image",o)}});
//# sourceMappingURL=index.umd.js.map
